(function(){"use strict";var e={8118:function(e,t,o){var s=o(9963),a=o(9876),r=o(6252);function n(e,t,o,s,a,n){const l=(0,r.up)("Navbar"),i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("html",null,[(0,r._)("div",null,[a.showNavbar?((0,r.wg)(),(0,r.j4)(l,{key:0})):(0,r.kq)("",!0),(0,r.Wm)(i)])])}o(2801),o(7658);var l=o.p+"img/person.fd2d6730.svg",i=o.p+"img/confirm.bfa18a93.svg";const c={class:"navbar navbar-expand-lg",style:{"background-color":"#ded8cf"}},d={class:"container"},u={class:"navbar-nav ml-auto"},m={class:"nav-item mx-auto my-auto p-auto"},g={href:"#"},p={class:"navbar-nav ml-auto"},h={class:"nav-item"},b={href:"#"};function f(e,t,o,s,a,n){return(0,r.wg)(),(0,r.iD)("section",null,[(0,r._)("nav",c,[(0,r._)("div",d,[(0,r._)("div",u,[(0,r._)("li",m,[(0,r._)("a",g,[(0,r._)("img",{src:l,alt:"",style:{opacity:"100"},onClick:t[0]||(t[0]=(...e)=>n.redirectToAccount&&n.redirectToAccount(...e))})])])]),(0,r._)("div",{class:"navbar-text mx-auto fw-bold text-dark",onClick:t[1]||(t[1]=(...e)=>n.goToHome&&n.goToHome(...e))}," Louis Vuitton "),(0,r._)("ul",p,[(0,r._)("li",h,[(0,r._)("a",b,[(0,r._)("img",{src:i,alt:"",onClick:t[2]||(t[2]=(...e)=>n.goToConfirmedBooking&&n.goToConfirmedBooking(...e))})])])])])])])}var v=o(6154),w={name:"NavBar",components:{},methods:{goToHome(){console.log("otw to home page"),this.$router.push("/")},async updateMemberId(e){const t=localStorage.getItem("token");let o=t.replace(/"/g,"");console.log("updating memberid :"),console.log(e),await(0,v.Z)({method:"put",url:`/memberships/${e}`,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},data:{memberId:""}}).catch((e=>{404===e.response.status?console.error("Error: "+e.response.data):console.error("Unexpected error: "+e.message)}))},redirectToAccount(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");console.log(t),e&&t&&v.Z.get(`/users/email/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{console.log("Fetched data:",e.data);const t=e.data;try{null!=t.membershipId?(localStorage.setItem("isMember","true"),localStorage.setItem("MemberID",t.membershipId),this.$router.push("/AccountPage"),console.log("member!"),this.updateMemberId(t.membershipId)):(localStorage.setItem("isMember","false"),this.$router.push("/MemberIdPage"),console.log("Not a member"))}catch(o){console.error("Error:",o)}})).catch((e=>{console.error("Error fetching user data:",e)}))},goToConfirmedBooking(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");console.log(t),e&&t&&v.Z.get(`/users/email/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{const t=e.data;try{null!=t.membershipId?(localStorage.setItem("isMember","true"),localStorage.setItem("MemberID",t.membershipId),console.log("member! checked by booking page"),this.updateMemberId(t.membershipId)):(localStorage.setItem("isMember","false"),console.log("Not a member checked by booking page"))}catch(o){console.error("Error:",o)}})).catch((e=>{console.error("Error fetching user data:",e)})),console.log("otw to confirmed booking page"),this.$router.push("/ConfirmedBookingPage")}}},_=o(3744);const k=(0,_.Z)(w,[["render",f]]);var y=k,D={components:{Navbar:y},data(){return{showNavbar:!0}},methods:{isTokenExpired(e){const t=JSON.parse(atob(e.split(".")[1])),o=1e3*t.exp;return Date.now()>=o}},created(){if(localStorage.getItem("token")){const e=localStorage.getItem("token");this.isTokenExpired(e)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/LogIn"),console.log("session expired: log in again"))}setInterval((()=>{if(localStorage.getItem("token")){const e=localStorage.getItem("token");this.isTokenExpired(e)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/LogIn"),console.log("session expired: log in again"))}}),18e5)},watch:{$route(e){"/LogIn"===e.path||"/SignUpPage"===e.path?this.showNavbar=!1:this.showNavbar=!0}}};const I=(0,_.Z)(D,[["render",n]]);var x=I,S=o(2201),P=o.p+"img/LVhouse.616fb2bd.png",T=o.p+"img/LVmodels1.bb7d375c.jpg",E=o.p+"img/LVmodels2.1ae21770.webp";const B={style:{"background-color":"#FEFBF7"}},F={class:"container mx-auto my-auto"},$={id:"myCarousel",class:"carousel slide","data-bs-ride":"carousel"},C={class:"carousel-inner"},A={class:"carousel-item active"},M=(0,r._)("img",{src:P,class:"d-block w-100",alt:"..."},null,-1),U={class:"carousel-caption d-md-block o"},O={class:"row"},j={class:"col-6 my-auto mx-auto"},N=(0,r._)("p",{class:"fw-bold mt-1 mb-1"},"MAKE BOOKING",-1),z=[N],L={class:"col-6 my-auto mx-auto"},Z=(0,r._)("p",{class:"fw-bold mt-1 mb-1"},"MODIFY BOOKING",-1),V=[Z],J=(0,r._)("div",{class:"carousel-item"},[(0,r._)("img",{src:T,class:"d-block w-100",alt:"..."})],-1),q=(0,r._)("div",{class:"carousel-item"},[(0,r._)("img",{src:E,class:"d-block w-100",alt:"..."})],-1),Y=(0,r.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2),H=(0,r.uE)('<div class="row text-center mt-3 p-1 bg-mute"><h2>Our Stores</h2></div><div class="row border rounded-3 bg-mute text-dark m-3 mb-2 pt-3 pb-1 text-center" style="background-color:#DED8CF;"><h5>LV Bayfront</h5><p>Island Maison B2-36, 2 Bayfront Ave 018972 Singapore, Singapore </p><p>+ 65 6788 3888</p></div><div class="row border rounded-3 bg-mute text-dark m-3 pt-3 pb-1 text-center" style="background-color:#DED8CF;"><h5>LV Ion Orchard </h5><p>ION Orchard 01-23, 2 Orchard Turn 238801 Singapore, Singapore </p><p>+ 65 6788 3888</p></div><div class="row border rounded-3 bg-mute text-dark m-3 pt-3 pb-1 text-center" style="background-color:#DED8CF;"><h5>LV Airport Boulevard</h5><p>65 Airport Boulevard T3, 02-36A 819663 Singapore, Singapore </p><p>+ 65 6788 3888</p></div>',4);function G(e,t,o,s,a,n){return(0,r.wg)(),(0,r.iD)("section",B,[(0,r._)("div",F,[(0,r._)("div",$,[(0,r._)("div",C,[(0,r._)("div",A,[M,(0,r._)("div",U,[(0,r._)("div",O,[(0,r._)("div",j,[(0,r._)("button",{type:"submit",class:"btn btn-sm rounded-3",style:{"background-color":"#DED8CF"},onClick:t[0]||(t[0]=(...e)=>n.checkBookingMade&&n.checkBookingMade(...e))},z)]),(0,r._)("div",L,[(0,r._)("button",{type:"submit",class:"btn btn-sm rounded-3",style:{"background-color":"#DED8CF"},onClick:t[1]||(t[1]=(...e)=>n.goToChangeAppt&&n.goToChangeAppt(...e))},V)])])])]),J,q]),Y]),H])])}var R=o(8877),K={name:"Home-view",components:{},mounted(){const e=document.querySelector("#myCarousel");new R.lr(e)},methods:{checkBookingMade(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");v.Z.get(`http://4.156.87.88:8080/users/future-booking-count/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{const t=e.data;console.log("booking made"+t),t>=3?alert("Booking Limit exceeded 3. You can't make any more bookings."):(console.log("otw to appointment making page"),this.$router.push("/BookingDetailsPage"))})).catch((e=>{console.error("Error fetching user data:",e)}))},goToChangeAppt(){console.log("otw to change appointment page"),this.$router.push("/ChangeAppointmentPage")}}};const Q=(0,_.Z)(K,[["render",G]]);var W=Q,X=o(3577),ee=o.p+"img/imageHolder.2ee30cc9.jpg";const te={style:{"background-color":"#FFFFFF"}},oe={class:"container p-4"},se={class:"row"},ae={class:"col-lg-3"},re={class:"card mb-2"},ne={class:"card-body text-center",style:{"background-color":"#FEFBF7"}},le=(0,r._)("img",{src:ee,class:"rounded-circle",style:{width:"150px"},alt:"Avatar"},null,-1),ie={class:"my-3 fw-semibold text-uppercase"},ce={class:"container d-flex justify-content-center mt-9"},de={class:"card",style:{"background-color":"#FFFFFF"}},ue={class:"p-3 px-4"},me=(0,r._)("div",{class:"d-flex align-items-center"},[(0,r._)("img",{src:"https://i.imgur.com/lhlX7sC.gif",width:"210",class:"mt-6"})],-1),ge=(0,r._)("div",{class:"d-flex flex-row justify-content-between mt-1"},null,-1),pe={class:"d-flex flex-row justify-content-center mt-3"},he={class:"star"},be=(0,r._)("div",{class:"card mb-4 mb-lg-0"},[(0,r._)("div",{class:"card-body p-0"},[(0,r._)("ul",{class:"list-group list-group-flush rounded-3"})])],-1),fe={class:"col-lg-8"},ve={class:"card mb-4"},we={class:"card-body",style:{"background-color":"#FEFBF7"}},_e={class:"row"},ke=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Name")],-1),ye={class:"text-muted mb-0"},De=(0,r._)("hr",null,null,-1),Ie={class:"row"},xe=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Email")],-1),Se={class:"text-muted mb-0"},Pe=(0,r._)("hr",null,null,-1),Te={class:"row"},Ee=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("div",{class:"mb-0 fw-semibold"},"Mobile")],-1),Be={class:"text-muted mb-0"},Fe=(0,r._)("hr",null,null,-1),$e={class:"col d-flex justify-content-center my-auto mx-auto pt-3 pb-2"},Ce={class:"col d-flex justify-content-center my-auto mx-auto pt-0 pb-3"};function Ae(e,t,o,s,a,n){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",te,[(0,r._)("div",oe,[(0,r._)("div",se,[(0,r._)("div",ae,[(0,r._)("div",re,[(0,r._)("div",ne,[le,(0,r._)("h4",ie,(0,X.zw)(a.list.name),1),(0,r._)("div",ce,[(0,r._)("div",de,[(0,r._)("div",ue,[me,ge,(0,r._)("div",pe,[(0,r._)("div",he,[(0,r._)("h6",null,(0,X.zw)(a.list.email),1),(0,r._)("h6",null,"Member ID: "+(0,X.zw)(a.list.membershipId),1),(0,r._)("h6",null,"Membership Tier: "+(0,X.zw)(a.list.tier),1)])])])])])])]),be]),(0,r._)("div",fe,[(0,r._)("div",ve,[(0,r._)("div",we,[(0,r._)("div",_e,[ke,(0,r._)("div",ye,(0,X.zw)(a.list.name),1)]),De,(0,r._)("div",Ie,[xe,(0,r._)("div",Se,(0,X.zw)(a.list.email),1)]),Pe,(0,r._)("div",Te,[Ee,(0,r._)("div",Be,(0,X.zw)(a.list.number),1)]),Fe,(0,r._)("div",$e,[(0,r._)("button",{type:"button",class:"form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"},onClick:t[0]||(t[0]=(...e)=>n.goToEditProfileMemberPage&&n.goToEditProfileMemberPage(...e))}," Edit Profile ")]),(0,r._)("div",Ce,[(0,r._)("button",{type:"button",class:"btn btn-outline-danger form-control text-centerbtn btn-rounded mx-auto",onClick:t[1]||(t[1]=(...e)=>n.logout&&n.logout(...e))}," Log Out ")])])])])])])])])}const Me=(0,a.Q_)({id:"auth",state:()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("token");return{user:e?JSON.parse(e):null,token:t?JSON.parse(t):null,returnUrl:"/"}},actions:{async login(e,t){const o=await fetch("http://4.156.87.88:8080/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(200!==o.status)throw new Error("Invalid credentials"+e+t);{const t=await o.text();localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",JSON.stringify(t)),this.user=e,this.token=t,Tr.push(this.returnUrl||"/")}},async signup(e,t,o,s,a){const r=await fetch("http://4.156.87.88:8080/api/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:t,email:o,name:s,number:a})});if(201!==r.status)throw new Error("Failed to sign up");Tr.push("/LogIn")},logout(){console.log("logging out"),this.user="",this.token="",window.localStorage.removeItem("user"),window.localStorage.removeItem("token"),window.localStorage.removeItem("isMember"),window.localStorage.removeItem("MemberID"),Tr.push("/LogIn")}}});var Ue={name:"AccountPage",components:{},methods:{logout(){const e=Me();e.logout()},goToEditProfileMemberPage(){console.log("otw to edit profile page for members"),this.$router.push("/EditProfileMemberPage")},async updateMemberTier(e){const t=localStorage.getItem("token").replace(/"/g,"");try{const o=await v.Z.put(`/memberships/${e}`,null,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(200===o.status){const e=o.data;this.list.tier=e.tier,console.log("Member tier updated successfully:",e.tier)}else console.error("Error updating member tier:",o.data)}catch(o){console.error("Error updating member tier:",o)}}},computed:{user(){return this.$store.state.user},updatedUser(){return this.$store.state.updatedUser}},data(){return{list:{name:"",number:"",membershipId:"",email:localStorage.getItem("user").replace(/["']/g,""),memberTier:""}}},mounted(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");console.log(`/users/email/${o}`),console.log(`Bearer ${s}`),e&&t&&v.Z.get(`http://4.156.87.88:8080/users/email/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{console.log("Fetched data:",e.data);const t=e.data,o=t.name,s=t.number,a=t.email,r=t.membershipId,n=t.tier;console.log(o),console.log(s),console.log(r),console.log(n),this.list.name=o,this.list.number=s,this.list.userEmail=a,this.list.membershipId=r,this.list.tier=n,this.updateMemberTier(this.list.membershipId)})).catch((e=>{console.error("Error fetching user data:",e)}))}};const Oe=(0,_.Z)(Ue,[["render",Ae]]);var je=Oe,Ne=o.p+"img/LVlogo.dbede1bc.png";const ze={style:{"background-color":"#FEFBF7"}},Le={class:"container"},Ze={class:"row mt-5"},Ve={class:"col-lg-4 m-auto rounded-top"},Je=(0,r._)("div",{class:"d-flex justify-content-center align-items-center mb-4 pb-2"},[(0,r._)("a",{href:"#"},[(0,r._)("img",{src:Ne,alt:"",style:{opacity:"100",width:"100px",height:"120px"}})])],-1),qe=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Email",-1),Ye={class:"input group mb-3 mx-3"},He=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Password",-1),Ge={class:"input group mb-3 mx-3"},Re={class:"d-grid mx-3"},Ke=(0,r._)("button",{type:"submit",class:"form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"}},"Log In",-1),Qe={class:"text-center"};function We(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("section",ze,[(0,r._)("div",Le,[(0,r._)("div",Ze,[(0,r._)("div",Ve,[Je,qe,(0,r._)("form",{action:"#",onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>l.onSubmit&&l.onSubmit(...e)),["prevent"]))},[(0,r._)("div",Ye,[(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",id:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>this.user.email=e)},null,512),[[s.nr,this.user.email]])]),He,(0,r._)("div",Ge,[(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",id:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>this.user.password=e)},null,512),[[s.nr,this.user.password]])]),(0,r._)("div",Re,[Ke,(0,r._)("p",Qe,[(0,r.Uk)(" Don't have an account? "),(0,r._)("a",{href:"",onClick:t[2]||(t[2]=(...e)=>l.goToSignUp&&l.goToSignUp(...e))},"Sign up now")])])],32)])])])])}var Xe=o(2262),et={name:"Log-InPage",components:{},setup(){const e=(0,Xe.qj)({email:"",password:""});return{user:e}},methods:{goToSignUp(){console.log("otw to sign up page"),this.$router.push("/SignUpPage")},onSubmit(){console.log(this.user),""!=this.user.email&&""!=this.user.password&&Me().login(this.user.email,this.user.password)}}};const tt=(0,_.Z)(et,[["render",We]]);var ot=tt;const st={style:{"background-color":"#FEFBF7"}},at={class:"container"},rt=(0,r._)("h1",{class:"text-center fw-semibold mt-4 mb-4"},"My Bookings",-1),nt={class:"row d-flex justify-content-center align-items-center h-100"},lt={class:"col-11 col-lg-7 col-xl-5"},it={key:0},ct={class:"my-card"},dt={class:"card-body p-4 text-black",style:{"background-color":"#DED8CF"}},ut={class:"fw-bold mb-4"},mt={class:"d-flex align-items-center justify-content-between mb-3"},gt={class:"mb-2"},pt={class:"mb-2"},ht={class:"mb-2 me-1"},bt={class:"mb-2"},ft={class:"row"},vt=(0,r._)("div",{class:"col-2"},null,-1),wt={class:"col-5"},_t={class:"col-4"},kt=["onClick"],yt={key:1},Dt=(0,r._)("div",{class:"row justify-content-center text-center mx-auto mt-3 pt-3"},[(0,r._)("h2",null,"No bookings!")],-1),It=[Dt];function xt(e,t,o,s,a,n){return(0,r.wg)(),(0,r.iD)("section",st,[(0,r._)("div",at,[rt,(0,r._)("div",nt,[(0,r._)("div",lt,[a.anyBookingExists?((0,r.wg)(),(0,r.iD)("div",it,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.bookings,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"card",key:e.bookingId},[(0,r._)("div",ct,[(0,r._)("div",dt,[(0,r._)("div",null,[(0,r._)("h6",ut," Louis Vuitton @ "+(0,X.zw)(n.storeIdToLocation(e.storeId)),1),(0,r._)("div",mt,[(0,r._)("p",gt,"ID: "+(0,X.zw)(e.bookingId),1),(0,r._)("p",pt,(0,X.zw)(e.time),1),(0,r._)("p",ht,(0,X.zw)(e.date),1),(0,r._)("p",bt,(0,X.zw)(e.pax)+" pax",1)])]),(0,r._)("div",ft,[vt,(0,r._)("div",wt,[(0,r._)("button",{type:"button",class:"btn btn-outline-light btn-rounded btn-block mx-auto border-0",style:{"background-color":"#5F4D30"},onClick:t[0]||(t[0]=(...e)=>n.goToChangeAppointmentPage&&n.goToChangeAppointmentPage(...e))},"Modify")]),(0,r._)("div",_t,[(0,r._)("button",{type:"button",class:"btn btn-outline-danger btn-rounded btn-block mx-auto",onClick:t=>n.deleteBooking(e.bookingId)}," Cancel",8,kt)])])])])])))),128))])):((0,r.wg)(),(0,r.iD)("div",yt,It))])])])])}var St={name:"Confirmed-booking-view",components:{},methods:{storeIdToLocation(e){return 100==e?"Ion Orchard":200==e?"Airport Boulevard":300==e?"Bayfront":void 0},deleteBooking(e){console.log("deleting booking ID: "+e),fetch(`http://4.156.87.88:8080/bookings/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token").replace(/"/g,"")}`}}).then((e=>{200===e.status?(alert("Booking cancelled successfully."),console.log("refreshing ConfirmedBookingPage"),this.$router.push("/")):403===e.status?alert("Unauthenticated"):401===e.status?alert("Unauthorized"):alert("Failed to cancel booking.")})).catch((e=>{console.error("Error fetching user data:",e)}))},goToChangeAppointmentPage(){console.log("Going to the changeAppointment page"),this.$router.push("/ChangeAppointmentPage")}},data(){return{bookings:[],anyBookingExists:!1}},mounted(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");console.log(`/bookings/user/${o}`),console.log(`Bearer ${s}`),e&&t&&v.Z.get(`http://4.156.87.88:8080/bookings/user/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{200==e.status?(this.bookings=e.data,console.log("Number of bookings: "+this.bookings.length),this.anyBookingExists=this.bookings.length>0):console.error("Error: Invalid response status:",e.status)})).catch((e=>{console.error("Error fetching user data:",e)}))}};const Pt=(0,_.Z)(St,[["render",xt]]);var Tt=Pt;const Et={style:{"background-color":"#FEFBF7"}},Bt={class:"container"},Ft={class:"row mt-5"},$t={class:"col-lg-4 m-auto rounded-top"},Ct=(0,r._)("div",{class:"d-flex justify-content-center align-items-center mb-5 pb-2"},[(0,r._)("a",{href:"#"},[(0,r._)("img",{src:Ne,alt:"",style:{opacity:"100",width:"100px",height:"120px"}})])],-1),At=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Name",-1),Mt={class:"input group mb-3 mx-3"},Ut=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Phone Number",-1),Ot={class:"input group mb-3 mx-3"},jt=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Email",-1),Nt={class:"input group mb-3 mx-3"},zt=(0,r._)("div",{class:"row ms-4 fw-semibold"},"Enter Password",-1),Lt={class:"input group mb-3 mx-3"},Zt={class:"d-grid mx-3"},Vt=(0,r._)("button",{type:"submit",class:"form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"}},"Sign Up",-1),Jt={class:"text-center"};function qt(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("section",Et,[(0,r._)("div",Bt,[(0,r._)("div",Ft,[(0,r._)("div",$t,[Ct,(0,r._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>l.onSubmit&&l.onSubmit(...e)),["prevent"]))},[At,(0,r._)("div",Mt,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>this.user.name=e)},null,512),[[s.nr,this.user.name]])]),Ut,(0,r._)("div",Ot,[(0,r.wy)((0,r._)("input",{type:"tel",class:"form-control",placeholder:"Phone Number","onUpdate:modelValue":t[1]||(t[1]=e=>this.user.number=e)},null,512),[[s.nr,this.user.number]])]),jt,(0,r._)("div",Nt,[(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",placeholder:"Email","onUpdate:modelValue":t[2]||(t[2]=e=>this.user.email=e)},null,512),[[s.nr,this.user.email]])]),zt,(0,r._)("div",Lt,[(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",placeholder:"Password","onUpdate:modelValue":t[3]||(t[3]=e=>this.user.password=e)},null,512),[[s.nr,this.user.password]])]),(0,r._)("div",Zt,[Vt,(0,r._)("p",Jt,[(0,r.Uk)(" Already have an account? "),(0,r._)("a",{href:"",onClick:t[4]||(t[4]=(...e)=>l.goToLogIn&&l.goToLogIn(...e))},"Log In")])])],32)])])])])}var Yt={name:"Signup-view",components:{},setup(){const e=(0,Xe.qj)({email:"",password:"",name:"",number:""});return{user:e}},methods:{goToLogIn(){console.log("otw to log in page"),this.$router.push("/LogIn")},onSubmit(){console.log(this.user),""!=this.user.email&&""!=this.user.password&&""!=this.user.name&&""!=this.user.number&&Me().signup(this.user.email,this.user.password,this.user.email,this.user.name,this.user.number)}}};const Ht=(0,_.Z)(Yt,[["render",qt]]);var Gt=Ht;const Rt=e=>((0,r.dD)("data-v-494dd896"),e=e(),(0,r.Cn)(),e),Kt={class:"container"},Qt=Rt((()=>(0,r._)("h1",{class:"text-center fw-semibold mt-4 mb-3"},"Make a Booking",-1))),Wt={class:"row d-flex justify-content-center align-items-center h-100"},Xt={class:"col col-md-15"},eo={class:"card-body p-2 text-black"},to={class:"container rounded"},oo={class:"row"},so={class:"col-md-6 mb-4"},ao={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},ro=Rt((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"Location",-1))),no=Rt((()=>(0,r._)("option",{value:"",hidden:"",selected:""},"Select",-1))),lo=Rt((()=>(0,r._)("option",{value:"1"},"Ion Orchard",-1))),io=Rt((()=>(0,r._)("option",{value:"2"},"Airport Boulevard",-1))),co=Rt((()=>(0,r._)("option",{value:"3"},"Bayfront",-1))),uo=[no,lo,io,co],mo={class:"col-md-6 mb-4"},go={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},po=Rt((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"No. of Pax",-1))),ho=(0,r.uE)('<option value="" hidden selected data-v-494dd896>Select</option><option value="1" data-v-494dd896>1</option><option value="2" data-v-494dd896>2</option><option value="3" data-v-494dd896>3</option><option value="4" data-v-494dd896>4</option>',5),bo=[ho],fo={class:"col-md-6 mb-4"},vo={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},wo=Rt((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"Date",-1))),_o={class:"error-message"},ko=["min","max"],yo={class:"col-md-6 mb-4"},Do={class:"form-control",style:{"background-color":"#ded8cf","max-height":"300px","overflow-y":"auto"}},Io=Rt((()=>(0,r._)("p",{class:"fw-bold mt-1 mb-2"},"Time Selection",-1))),xo={class:"container"},So={class:"row"},Po=["onClick"],To=Rt((()=>(0,r._)("button",{type:"submit",class:"btn form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5f4d30"}}," Make Booking ",-1)));function Eo(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",null,[(0,r._)("div",Kt,[Qt,(0,r._)("div",Wt,[(0,r._)("div",Xt,[(0,r._)("div",eo,[(0,r._)("div",to,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>l.submitBooking&&l.submitBooking(...e)),["prevent"]))},[(0,r._)("div",oo,[(0,r._)("div",so,[(0,r._)("div",ao,[ro,(0,r._)("select",{class:"border-0 outline-none",onChange:t[0]||(t[0]=(...e)=>l.updateSelectedLocation&&l.updateSelectedLocation(...e))},uo,32)])]),(0,r._)("div",mo,[(0,r._)("div",go,[po,(0,r._)("select",{class:"border-0 outline-none",style:{height:"100"},onChange:t[1]||(t[1]=(...e)=>l.updatePax&&l.updatePax(...e))},bo,32)])]),(0,r._)("div",fo,[(0,r._)("div",vo,[wo,(0,r._)("h5",_o,(0,X.zw)(n.dateErrorMessage),1),(0,r.wy)((0,r._)("input",{class:(0,X.C_)(["inputbox rounded-3 border-0 text-muted",{"disabled-date":l.isDateBeforeToday(n.taskData.date)}]),type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>n.taskData.date=e),min:n.minDate,max:l.maxDate,onInput:t[3]||(t[3]=(...e)=>l.updateSelectedDate&&l.updateSelectedDate(...e))},null,42,ko),[[s.nr,n.taskData.date]])])]),(0,r._)("div",yo,[(0,r._)("div",Do,[Io,(0,r._)("div",xo,[(0,r._)("div",So,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.availableTimeSlots,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:(0,X.C_)({btn:!0,"form-control":!0,"btn-custom":!0,"mx-auto":!0,selected:!n.hasError&&n.taskData[e]}),onClick:t=>l.updateSelectedTime(e)},(0,X.zw)(e),11,Po)))),128))])])])])]),To],32)])])])])])])])}var Bo={name:"BookingDetailsView",data(){return{taskData:{date:null,pax:0,storeId:0,time:null,email:"",selectedDate:null},availability:[],availableTimeSlots:[],hasError:!1,timeSlots:["11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],minDate:new Date,dateErrorMessage:"",memberTier:""}},computed:{maxDate(){const e="true"===localStorage.getItem("isMember");if(e){if("VIP"===this.memberTier){const e=new Date;return e.setDate(e.getDate()+11),e.toISOString().split("T")[0]}{const e=new Date;return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}}{const e=new Date;return e.setDate(e.getDate()+4),e.toISOString().split("T")[0]}}},methods:{filterAvailableTimeSlots(){this.availableTimeSlots=this.timeSlots.filter(((e,t)=>this.availability[t]))},fetchMemberTier(){const e=localStorage.getItem("MemberID"),t=`http://4.156.87.88:8080/memberships/${e}`,o=localStorage.getItem("token"),s=o.replace(/^"([^"]*)"$/,"$1");let a=s.replace(/"/g,"");v.Z.get(t,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then((e=>{this.memberTier=e.data.tier,console.log(this.memberTier)})).catch((e=>{console.error("Error fetching member tier:",e)}))},getUserByEmail(){const e=localStorage.getItem("user"),t=e.replace(/^"([^"]*)"$/,"$1"),o=localStorage.getItem("token"),s=o.replace(/^"([^"]*)"$/,"$1");console.log(t),console.log(s),this.taskData.email=t;let a=s.replace(/"/g,"");t&&s&&v.Z.get(`http://4.156.87.88:8080/users/email/${t}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).catch((e=>{console.error("Error fetching user data:",e)}))},updateSelectedDate(){const e=new Date(this.taskData.date),t=new Date;t.setHours(0,0,0,0),e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()?this.dateErrorMessage="Bookings cannot be made on the day itself. Please select a date from tomorrow onwards.":e<new Date?this.dateErrorMessage="Invalid date. Please select a date after "+t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear()+".":(this.dateErrorMessage="",console.log("Selected date:",this.taskData.date),this.fetchAvailableTimeslots())},isDateBeforeToday(e){if(!e)return!1;const t=new Date;t.setHours(0,0,0,0);const o=new Date(e);return o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate()?t:o<t},formatTimeAsSQLTime(e){return`${e}:00`},updatePax(e){const t=e.target.value;this.taskData.pax=parseInt(t),console.log("Selected pax:",this.taskData.pax)},updateSelectedLocation(e){const t=e.target.value;let o=0;1==t?o=100:2==t?o=200:3==t&&(o=300),this.taskData.storeId=o,console.log("Selected storeId:",this.taskData.storeId)},updateSelectedTime(e){this.taskData.time=this.formatTimeAsSQLTime(e),this.unselectAllTimes(),this.taskData[e]=!0,console.log("Selected time:",e),this.fetchStoreAvailability()},unselectAllTimes(){const e=["11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"];for(const t of e)this.taskData[t]=!1},fetchAvailableTimeslots(){let e="";if(this.taskData.storeId||(e+="Location\n"),this.taskData.pax<=0&&(e+="Number of Pax\n"),e)return e=e.trim(),this.hasError=!0,void alert(`${e}\nnot set. Please select before selecting date.`);const t=new Date(this.taskData.date),o=t.toISOString().split("T")[0],s=localStorage.getItem("token"),a=s.replace(/"/g,""),r=`http://4.156.87.88:8080/stores/${this.taskData.storeId}/availability/${o}`;v.Z.get(r,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then((e=>{this.availability=e.data,this.filterAvailableTimeSlots()})).catch((e=>{console.error("Error fetching store availability:",e)}))},fetchStoreAvailability(){const e=new Date(this.taskData.date),t=e.toISOString().split("T")[0],o=`http://4.156.87.88:8080/stores/${this.taskData.storeId}/availability?date=${t}&time=${this.taskData.time}`,s=localStorage.getItem("token"),a=s.replace(/"/g,""),r={Authorization:`Bearer ${a}`,"Content-Type":"application/json"};v.Z.get(o,{headers:r}).then((e=>{const t=e.data;console.log("avail: "+t);const o=parseInt(t);this.taskData.pax>o&&(this.hasError=!0,console.error("pax exceeded availability."),alert("Availability: "+t+". Store does not have enough capacity left. Please choose a different time slot or location."))})).catch((e=>{console.error("Error fetching store availability:",e)}))},submitBooking(){this.getUserByEmail(),this.createBooking()},createBooking(){const e=JSON.stringify({date:this.taskData.date,pax:this.taskData.pax,storeId:this.taskData.storeId,time:this.taskData.time,email:this.taskData.email}),t="http://4.156.87.88:8080/bookings",o=localStorage.getItem("token");let s=o.replace(/"/g,"");const a={Authorization:`Bearer ${s}`,"Content-Type":"application/json"};v.Z.post(t,e,{headers:a}).then((t=>{console.log("JSON Data:",e),console.log(t.data),alert("Booking added successfully!"),console.log("Going to the ConfirmedBooking page"),this.$router.push("/ConfirmedBookingPage")})).catch((t=>{t.response&&404===t.response.status?(this.dateErrorMessage=t.response.data,console.error("Booking capacity exceeded:",t.response.data),alert("Booking capacity exceeded. Please choose a different time slot or location.")):t.response?(console.log("JSON Data:",e),console.error("Response error:",t.response),alert("Failed to add booking. Error response.\n"+t)):t.request?(console.log("JSON Data:",e),console.error("Request error:",t.request),alert("Failed to add booking. Error request.\n"+t)):(console.log("JSON Data:",e),console.error("Error adding booking:",t),alert("Failed to add booking. Please try again.\n"+t))}))},goToHome(){console.log("Going to the Booking page"),this.$router.push("/")}},mounted(){this.fetchMemberTier()}};const Fo=(0,_.Z)(Bo,[["render",Eo],["__scopeId","data-v-494dd896"]]);var $o=Fo;const Co=e=>((0,r.dD)("data-v-657d65bc"),e=e(),(0,r.Cn)(),e),Ao={class:"container"},Mo=Co((()=>(0,r._)("h1",{class:"text-center fw-semibold mt-4 mb-4"},"Modify My Booking",-1))),Uo={class:"row justify-content-center align-items-center"},Oo={class:"col-11 mb-3"},jo={class:"card"},No={class:"card-body text-black"},zo=Co((()=>(0,r._)("h4",{class:"text-center fw-semibold mb-3 mt-1"}," Existing Booking ",-1))),Lo={class:"text-center"},Zo={key:0,class:"details-container"},Vo={class:"d-flex justify-content-center align-items-center"},Jo={key:1,class:"details-container"},qo={class:"text-center fw-semibold mb-4 mt-2"},Yo={class:"text-center"},Ho={class:"mb-2 me-5 d-inline d-xl-block"},Go={class:"mb-2 me-5 d-inline d-xl-block"},Ro={class:"mb-2 d-inline d-xl-block"},Ko={class:"card-body p-3 text-black"},Qo={action:""},Wo={class:"row"},Xo={class:"col-md-6 mb-4"},es={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},ts=Co((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"Location",-1))),os=Co((()=>(0,r._)("option",{value:"",hidden:"",selected:""},"Select",-1))),ss=Co((()=>(0,r._)("option",{value:"1"},"Ion Orchard",-1))),as=Co((()=>(0,r._)("option",{value:"2"},"Airport Boulevard",-1))),rs=Co((()=>(0,r._)("option",{value:"3"},"Bayfront",-1))),ns=[os,ss,as,rs],ls={class:"col-md-6 mb-4"},is={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},cs=Co((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"No. of Pax",-1))),ds=(0,r.uE)('<option value="" hidden selected data-v-657d65bc>0</option><option value="1" data-v-657d65bc>1</option><option value="2" data-v-657d65bc>2</option><option value="3" data-v-657d65bc>3</option><option value="4" data-v-657d65bc>4</option>',5),us=[ds],ms={class:"row"},gs={class:"col-md-6 mb-4"},ps={class:"form-control d-flex flex-column",style:{"background-color":"#ded8cf"}},hs=Co((()=>(0,r._)("p",{class:"fw-semibold mt-1 mb-1"},"Date",-1))),bs={class:"error-message"},fs=["min","max"],vs={class:"col-md-6 mb-4"},ws={class:"form-control",style:{"background-color":"#ded8cf","max-height":"300px","overflow-y":"auto"}},_s=Co((()=>(0,r._)("p",{class:"fw-bold mt-1 mb-2"},"Time Selection",-1))),ks={class:"container"},ys={class:"row"},Ds=["onClick"];function Is(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("section",null,[(0,r._)("div",Ao,[Mo,(0,r._)("div",Uo,[(0,r._)("div",Oo,[(0,r._)("div",jo,[(0,r._)("div",No,[(0,r._)("div",null,[zo,(0,r._)("div",Lo,[n.hasBookingId?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Zo,[(0,r._)("div",Vo,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.bookingId=e),type:"text",placeholder:"Confirm Booking ID"},null,512),[[s.nr,n.bookingId]]),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>l.confirmBooking&&l.confirmBooking(...e)),class:"confirm-button"},"Confirm")])])),n.hasBookingId?((0,r.wg)(),(0,r.iD)("div",Jo,[(0,r._)("p",null,"Confirmed Booking ID: "+(0,X.zw)(n.confirmedId),1),(0,r._)("h6",qo,(0,X.zw)(this.storeIdToLocation(this.bookingStoreId)),1),(0,r._)("div",Yo,[(0,r._)("div",Ho,(0,X.zw)(this.bookingTime),1),(0,r._)("div",Go,(0,X.zw)(this.bookingDate),1),(0,r._)("div",Ro,(0,X.zw)(this.bookingPax)+" pax",1)])])):(0,r.kq)("",!0)])])])])]),(0,r._)("form",{onSubmit:t[7]||(t[7]=(0,s.iM)(((...e)=>l.submitBooking&&l.submitBooking(...e)),["prevent"]))},[(0,r._)("div",Ko,[(0,r._)("form",Qo,[(0,r._)("div",Wo,[(0,r._)("div",Xo,[(0,r._)("div",es,[ts,(0,r._)("select",{class:"border-0 outline-none",onChange:t[2]||(t[2]=(...e)=>l.selectLocation&&l.selectLocation(...e))},ns,32)])]),(0,r._)("div",ls,[(0,r._)("div",is,[cs,(0,r._)("select",{class:"border-0 outline-none",style:{height:"100%"},onChange:t[3]||(t[3]=(...e)=>l.updatePax&&l.updatePax(...e))},us,32)])])]),(0,r._)("div",ms,[(0,r._)("div",gs,[(0,r._)("div",ps,[hs,(0,r._)("h5",bs,(0,X.zw)(n.dateErrorMessage),1),(0,r.wy)((0,r._)("input",{class:(0,X.C_)(["inputbox rounded-3 border-0 text-muted",{"disabled-date":l.isDateBeforeToday(n.taskData.date)}]),type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>n.taskData.newDate=e),min:n.minDate,max:l.maxDate,onInput:t[5]||(t[5]=(...e)=>l.updateSelectedDate&&l.updateSelectedDate(...e))},null,42,fs),[[s.nr,n.taskData.newDate]])])]),(0,r._)("div",vs,[(0,r._)("div",ws,[_s,(0,r._)("div",ks,[(0,r._)("div",ys,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.availableTimeSlots,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:(0,X.C_)({btn:!0,"form-control":!0,"btn-custom":!0,"mx-auto":!0,selected:!n.hasError&&n.taskData[e]}),onClick:t=>l.updateSelectedTime(e)},(0,X.zw)(e),11,Ds)))),128))])])])])]),(0,r._)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>l.submitBooking&&l.submitBooking(...e)),class:"btn form-control text-center btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5f4d30"}}," Update Booking ")])])],32)])])])}var xs={name:"ChangeAppointmentPage",components:{},data(){return{hasBookingId:!1,bookingId:0,confirmedId:null,bookingPax:0,bookingTime:"",bookingDate:"",bookingStoreId:0,taskData:{newDate:null,newPax:0,newStoreId:0,newTime:this.selectedTime,email:""},availability:[],availableTimeSlots:[],hasError:!1,timeSlots:["11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],minDate:new Date,dateErrorMessage:"",memberTier:""}},computed:{maxDate(){const e="true"===localStorage.getItem("isMember");if(e){if("VIP"===this.memberTier){const e=new Date;return e.setDate(e.getDate()+11),e.toISOString().split("T")[0]}{const e=new Date;return e.setDate(e.getDate()+6),e.toISOString().split("T")[0]}}{const e=new Date;return e.setDate(e.getDate()+4),e.toISOString().split("T")[0]}}},methods:{filterAvailableTimeSlots(){this.availableTimeSlots=this.timeSlots.filter(((e,t)=>this.availability[t]))},confirmBooking(){const e=`http://4.156.87.88:8080/bookings/${this.bookingId}`,t=localStorage.getItem("token"),o=t.replace(/"/g,""),s={Authorization:`Bearer ${o}`,"Content-Type":"application/json"};v.Z.get(e,{headers:s}).then((e=>{const t=e.data;t?(this.confirmedId=this.bookingId,this.hasBookingId=!0,this.bookingPax=t.pax,this.bookingStoreId=t.storeId,this.bookingLocation=this.storeIdToLocation(t.storeId),this.bookingTime=t.time,this.bookingDate=t.date):alert("Booking not found. Please try again.")})).catch((e=>{e.response&&404===e.response.status?alert("Invalid booking ID. Please enter a valid booking ID."):console.error("Error:",e)}))},storeIdToLocation(e){return 100==e?"Ion Orchard":200==e?"Airport Boulevard":300==e?"Bayfront":void 0},updatePax(e){const t=e.target.value;this.taskData.newPax=parseInt(t),console.log("Selected pax:",this.taskData.newPax)},updateSelectedDate(){const e=new Date(this.taskData.newDate),t=new Date;t.setHours(0,0,0,0),e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()?this.dateErrorMessage="Bookings cannot be made on the day itself. Please select a date from tomorrow onwards.":e<new Date?this.dateErrorMessage="Invalid date. Please select a date after "+t.getDate()+"/"+t.getMonth()+"/"+t.getFullYear()+" onwards.":(this.dateErrorMessage="",console.log("Selected date:",this.taskData.newDate),this.fetchAvailableTimeslots())},isDateBeforeToday(e){if(!e)return!1;const t=new Date;t.setHours(0,0,0,0);const o=new Date(e);return o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate()?t:o<t},formatTimeAsSQLTime(e){return`${e}:00`},updateSelectedTime(e){this.taskData.newTime=this.formatTimeAsSQLTime(e),this.unselectAllTimes(),this.taskData[e]=!0,console.log("Selected time:",e),this.fetchStoreAvailability()},unselectAllTimes(){const e=["11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"];for(const t of e)this.taskData[t]=!1},fetchAvailableTimeslots(){let e="";if(this.taskData.newStoreId||(e+="Location\n"),this.taskData.newPax<=0&&(e+="Number of Pax\n"),e)return e=e.trim(),this.hasError=!0,void alert(`${e}\nnot set. Please select before selecting date.`);const t=new Date(this.taskData.newDate),o=t.toISOString().split("T")[0],s=localStorage.getItem("token"),a=s.replace(/"/g,""),r=`http://4.156.87.88:8080/stores/${this.taskData.newStoreId}/availability/${o}`;v.Z.get(r,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then((e=>{this.availability=e.data,this.filterAvailableTimeSlots()})).catch((e=>{console.error("Error fetching store availability:",e)}))},fetchStoreAvailability(){const e=new Date(this.taskData.newDate),t=e.toISOString().split("T")[0],o=`http://4.156.87.88:8080/stores/${this.taskData.newStoreId}/availability?date=${t}&time=${this.taskData.newTime}`,s=localStorage.getItem("token"),a=s.replace(/"/g,""),r={Authorization:`Bearer ${a}`,"Content-Type":"application/json"};v.Z.get(o,{headers:r}).then((e=>{const t=e.data;console.log("avail: "+t);const o=parseInt(t);this.taskData.newPax>o?(this.hasError=!0,console.error("pax exceeded availability."),alert("Availability: "+t+". Store does not have enough capacity left. Please choose a different time slot or location.")):console.log(this.taskData.newPax)})).catch((e=>{console.error("Error fetching store availability:",e)}))},selectLocation(e){const t=e.target.value;let o=0;1==t?o=100:2==t?o=200:3==t&&(o=300),this.taskData.newStoreId=o,console.log(this.taskData.newStoreId)},submitBooking(){this.hasBookingId?(this.getUserByEmail(),this.updateBooking()):alert("Please enter and confirm your booking ID before updating.")},getUserByEmail(){const e=localStorage.getItem("user"),t=e.replace(/^"([^"]*)"$/,"$1"),o=localStorage.getItem("token"),s=o.replace(/^"([^"]*)"$/,"$1");console.log(t),console.log(s),this.taskData.email=t;let a=s.replace(/"/g,"");t&&s&&v.Z.get(`http://4.156.87.88:8080/users/email/${t}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).catch((e=>{console.error("Error fetching user data:",e)}))},updateBooking(){this.getUserByEmail();const e=JSON.stringify({bookingId:this.confirmedId,date:this.taskData.newDate,pax:this.taskData.newPax,storeId:this.taskData.newStoreId,time:this.taskData.newTime,email:this.taskData.email}),t=`http://4.156.87.88:8080/bookings/${this.confirmedId}`,o=localStorage.getItem("token");let s=o.replace(/"/g,"");const a={Authorization:`Bearer ${s}`,"Content-Type":"application/json"};v.Z.put(t,e,{headers:a}).then((t=>{console.log("JSON Data:",e),console.log(t.data),alert("Booking updated successfully!"),console.log("Going to the ConfirmedBooking page"),this.$router.push("/ConfirmedBookingPage")})).catch((t=>{t.response&&500===t.response.status?alert("Please fill in all details before updating."):t.response?(console.log("JSON Data:",e),console.error("Response error:",t.response),alert("Failed to update booking. Error response.\n"+t)):t.request?(console.log("JSON Data:",e),console.error("Request error:",t.request),alert("Failed to update booking. Error request.\n"+t)):(console.log("JSON Data:",e),console.error("Error adding booking:",t),alert("Failed to update booking. Please try again.\n"+t))}))},goToHome(){console.log("Going to the Booking page"),this.$router.push("/")},fetchMemberTier(){const e=localStorage.getItem("MemberID"),t=`http://4.156.87.88:8080/memberships/${e}`,o=localStorage.getItem("token"),s=o.replace(/^"([^"]*)"$/,"$1");let a=s.replace(/"/g,"");v.Z.get(t,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}).then((e=>{this.memberTier=e.data.tier,console.log(this.memberTier)})).catch((e=>{console.error("Error fetching member tier:",e)}))}},mounted(){this.fetchMemberTier()}};const Ss=(0,_.Z)(xs,[["render",Is],["__scopeId","data-v-657d65bc"]]);var Ps=Ss;const Ts={style:{"background-color":"#FFFFFF"}},Es={class:"container p-4"},Bs={class:"row"},Fs={class:"col-lg-4"},$s={class:"card mb-2"},Cs={class:"card-body text-center",style:{"background-color":"#FEFBF7"}},As=(0,r._)("img",{src:ee,class:"rounded-circle",style:{width:"150px"},alt:"Avatar"},null,-1),Ms={class:"my-3 fw-semibold text-uppercase"},Us={class:"col-lg-8"},Os={class:"card mb-4"},js={class:"card-body",style:{"background-color":"#FEFBF7"}},Ns=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Name")],-1),zs={class:"input-group mb-3"},Ls=(0,r._)("hr",null,null,-1),Zs=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Email")],-1),Vs={class:"input-group mb-3"},Js=(0,r._)("hr",null,null,-1),qs=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Mobile")],-1),Ys={class:"input-group mb-3"},Hs=(0,r._)("hr",null,null,-1),Gs={class:"col-sm-3"},Rs={class:"col-sm-12"},Ks=(0,r._)("p",{class:"mb-0 fw-semibold"},"Current Password:",-1),Qs=(0,r._)("p",{class:"mb-0 fw-semibold"},"New Password:",-1),Ws=(0,r._)("button",{type:"submit"},"Change Password",-1),Xs={class:"col d-flex justify-content-center my-auto mx-auto pt-3 p-0"};function ea(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",Ts,[(0,r._)("div",Es,[(0,r._)("div",Bs,[(0,r._)("div",Fs,[(0,r._)("div",$s,[(0,r._)("div",Cs,[As,(0,r._)("h4",Ms,(0,X.zw)(n.list.name),1)])])]),(0,r._)("div",Us,[(0,r._)("div",Os,[(0,r._)("div",js,[Ns,(0,r._)("div",zs,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"fullName","onUpdate:modelValue":t[0]||(t[0]=e=>n.list.name=e)},null,512),[[s.nr,n.list.name]])]),Ls,Zs,(0,r._)("div",Vs,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.list.email=e)},null,512),[[s.nr,n.list.email]])]),Js,qs,(0,r._)("div",Ys,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"mobileno","onUpdate:modelValue":t[2]||(t[2]=e=>n.list.number=e)},null,512),[[s.nr,n.list.number]])]),Hs,(0,r._)("div",Gs,[(0,r._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>l.updateUserPassword&&l.updateUserPassword(...e)),["prevent"]))},[(0,r._)("div",Rs,[(0,r._)("div",null,[Ks,(0,r.wy)((0,r._)("input",{type:"password",class:"form-control mb-2",id:"oldPassword","onUpdate:modelValue":t[3]||(t[3]=e=>n.list.oldPassword=e),required:""},null,512),[[s.nr,n.list.oldPassword]])]),(0,r._)("div",null,[Qs,(0,r.wy)((0,r._)("input",{type:"password",class:"form-control mb-3",id:"newPassword","onUpdate:modelValue":t[4]||(t[4]=e=>n.list.newPassword=e),required:""},null,512),[[s.nr,n.list.newPassword]])])]),Ws],32)]),(0,r._)("div",Xs,[(0,r._)("button",{type:"submit",class:"btn form-control text-centerbtn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"},onClick:t[6]||(t[6]=(...e)=>l.updateAndGoToMemberId&&l.updateAndGoToMemberId(...e))}," Update ")])])])])])])])])}var ta={name:"Edit-Profile-view",components:{},data(){return{errorList:"",list:{name:"",number:"",email:"",memberID:""}}},methods:{goToEditProfileMemberPage(){console.log("otw to edit profile page for members"),this.$router.push("/EditProfileMemberPage")},goToMemberIdPage(){console.log("otw to MemberID Page"),this.$router.push("/MemberIdPage")},logout(){const e=Me();e.logout()},async updateUserPassword(){const e=localStorage.getItem("user").replace(/"/g,""),t="Bearer "+localStorage.getItem("token").replace(/"/g,"");if(console.log(t),!e||!t)return void console.error("userEmail or token is missing.");if(""===this.list.newPassword||""===this.list.newPassword.trim())return void alert("New password cannot be empty or null.");console.log("new pw:"+this.list.newPassword),console.log("old pw:"+this.list.oldPassword);const o=JSON.stringify({email:this.list.email,oldPassword:this.list.oldPassword,newPassword:this.list.newPassword}),s={Authorization:t,"Content-Type":"application/json"},a="http://4.156.87.88:8080/users/update-password";console.log("API URL: ",a),console.log("Request Data: ",o),v.Z.put(a,o,{headers:s}).then((e=>{if(console.log("JSON Data:",o),console.log(e.data),alert("Password changed successfully!"),this.list.oldPassword!==this.list.newPassword){if(confirm("You are changing your password. To continue, you will need to re-login. Do you want to proceed?"))return this.logout(),void this.$router.push({name:"login"});this.list.oldPassword=this.list.password}})).catch((e=>{console.error("Error:",e),e.response&&400===e.response.status&&alert("Failed to change password: "+e.response.data),e.response&&401===e.response.status&&alert("Failed to change password. Please try again later.")}))},async getUserData(){const e=localStorage.getItem("user"),t=e.replace(/"/g,""),o=localStorage.getItem("token").replace(/"/g,"");if(e&&o)try{const e=await v.Z.get(`http://4.156.87.88:8080/users/email/${t}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});console.log(e.data);const s=e.data;this.list.name=s.name,this.list.email=s.email,this.list.number=s.number}catch(s){s.response&&404===s.response.status?alert("User not found"):console.error("An error occurred:",s)}else console.error("userEmail or token is missing.")},updateUser(){const e=localStorage.getItem("user"),t=localStorage.getItem("token").replace(/"/g,"");if(!e||!t)return void console.error("userEmail or token is missing.");const o=e.replace(/"/g,""),s=JSON.stringify({name:this.list.name,email:this.list.email,number:this.list.number,password:this.list.password}),a={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},r=`http://4.156.87.88:8080/users/update/${o}`;v.Z.put(r,s,{headers:a}).then((e=>{if(console.log("JSON Data:",s),console.log(e.data),console.log(localStorage.getItem("token")),alert("Profile updated successfully!"),this.list.email!==o){if(confirm("You are changing your email. To continue, you will need to re-login. Do you want to proceed?"))return this.logout(),void console.log("otw to login page");this.list.email=o}this.$router.push("/")})).catch((e=>{console.error("Error:",e),404===e.response.status?(console.error("Error 404!:",e.response.data),alert("Error 404!!!!.")):400===e.response.status?(console.error("error 400",e.data),alert("Failed to update profile."+e.response.data)):e.response&&(console.error("JSON Data:",s),console.error("Response error:",e.response),alert("Failed to update profile. Error response.\n"+e))}))},async updateAndGoToMemberId(){this.updateUser(),this.goToMemberIdPage()}},mounted(){this.getUserData()}};const oa=(0,_.Z)(ta,[["render",ea]]);var sa=oa;const aa={style:{"background-color":"#FFFFFF"}},ra={class:"container p-4"},na={class:"row"},la={class:"col-lg-4"},ia={class:"card mb-2"},ca={class:"card-body text-center",style:{"background-color":"#FEFBF7"}},da=(0,r._)("img",{src:ee,class:"rounded-circle",style:{width:"150px"},alt:"Avatar"},null,-1),ua={class:"my-3 fw-semibold text-uppercase"},ma={class:"container d-flex justify-content-center mt-9"},ga={class:"card",style:{"background-color":"#FFFFFF"}},pa={class:"p-3 px-4"},ha=(0,r._)("div",{class:"d-flex align-items-center"},[(0,r._)("img",{src:"https://i.imgur.com/lhlX7sC.gif",width:"210",class:"mt-6"})],-1),ba=(0,r._)("div",{class:"d-flex flex-row justify-content-between mt-1"},null,-1),fa={class:"d-flex flex-row justify-content-center mt-3"},va={class:"star"},wa=(0,r._)("div",{class:"card mb-4 mb-lg-0"},[(0,r._)("div",{class:"card-body p-0"},[(0,r._)("ul",{class:"list-group list-group-flush rounded-3"})])],-1),_a={class:"col-lg-8"},ka={class:"card mb-4"},ya={class:"card-body",style:{"background-color":"#FEFBF7"}},Da=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Name")],-1),Ia={class:"input-group mb-3"},xa=(0,r._)("hr",null,null,-1),Sa=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Email")],-1),Pa={class:"input-group mb-3"},Ta=(0,r._)("hr",null,null,-1),Ea=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Mobile")],-1),Ba={class:"input-group mb-3"},Fa=(0,r._)("hr",null,null,-1),$a={class:"col-sm-3"},Ca={class:"col-sm-12"},Aa=(0,r._)("p",{class:"mb-0 fw-semibold"},"Current Password:",-1),Ma=(0,r._)("p",{class:"mb-0 fw-semibold"},"New Password:",-1),Ua=(0,r._)("button",{type:"submit"},"Change Password",-1),Oa={class:"col d-flex justify-content-center my-auto mx-auto pt-3 p-0"};function ja(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",aa,[(0,r._)("div",ra,[(0,r._)("div",na,[(0,r._)("div",la,[(0,r._)("div",ia,[(0,r._)("div",ca,[da,(0,r._)("h4",ua,(0,X.zw)(n.list.name),1),(0,r._)("div",ma,[(0,r._)("div",ga,[(0,r._)("div",pa,[ha,ba,(0,r._)("div",fa,[(0,r._)("div",va,[(0,r._)("h6",null,(0,X.zw)(n.list.email),1),(0,r._)("h6",null,"Member ID: "+(0,X.zw)(n.list.membershipId),1),(0,r._)("h6",null,"Membership Tier: "+(0,X.zw)(n.list.tier),1)])])])])])])]),wa]),(0,r._)("div",_a,[(0,r._)("div",ka,[(0,r._)("div",ya,[Da,(0,r._)("div",Ia,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"fullName","onUpdate:modelValue":t[0]||(t[0]=e=>n.list.name=e)},null,512),[[s.nr,n.list.name]])]),xa,Sa,(0,r._)("div",Pa,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.list.email=e)},null,512),[[s.nr,n.list.email]])]),Ta,Ea,(0,r._)("div",Ba,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",id:"mobileno","onUpdate:modelValue":t[2]||(t[2]=e=>n.list.number=e)},null,512),[[s.nr,n.list.number]])]),Fa,(0,r._)("div",$a,[(0,r._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>l.updateUserPassword&&l.updateUserPassword(...e)),["prevent"]))},[(0,r._)("div",Ca,[(0,r._)("div",null,[Aa,(0,r.wy)((0,r._)("input",{type:"password",class:"form-control mb-2",id:"oldPassword","onUpdate:modelValue":t[3]||(t[3]=e=>n.list.oldPassword=e),required:""},null,512),[[s.nr,n.list.oldPassword]])]),(0,r._)("div",null,[Ma,(0,r.wy)((0,r._)("input",{type:"password",class:"form-control mb-3",id:"newPassword","onUpdate:modelValue":t[4]||(t[4]=e=>n.list.newPassword=e),required:""},null,512),[[s.nr,n.list.newPassword]])])]),Ua],32)]),(0,r._)("div",Oa,[(0,r._)("button",{type:"submit",class:"btn form-control text-centerbtn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"},onClick:t[6]||(t[6]=e=>l.updateAndGoToAccount())}," Update ")])])])])])])])])}var Na={name:"Edit-Profile-Member-view",components:{},data(){return{errorList:"",list:{name:"",number:"",email:""}}},methods:{goToAccountPage(){console.log("otw to account Page"),this.$router.push("/AccountPage")},logout(){const e=Me();e.logout()},async updateUserPassword(){const e=localStorage.getItem("user").replace(/"/g,""),t="Bearer "+localStorage.getItem("token").replace(/"/g,"");if(console.log(t),!e||!t)return void console.error("userEmail or token is missing.");if(""===this.list.newPassword||""===this.list.newPassword.trim())return void alert("New password cannot be empty or null.");console.log("new pw:"+this.list.newPassword),console.log("old pw:"+this.list.oldPassword);const o=JSON.stringify({email:this.list.email,oldPassword:this.list.oldPassword,newPassword:this.list.newPassword}),s={Authorization:t,"Content-Type":"application/json"},a="http://4.156.87.88:8080/users/update-password";console.log("API URL: ",a),console.log("Request Data: ",o),v.Z.put(a,o,{headers:s}).then((e=>{if(console.log("JSON Data:",o),console.log(e.data),alert("Password changed successfully!"),this.list.oldPassword!==this.list.newPassword){if(confirm("You are changing your password. To continue, you will need to re-login. Do you want to proceed?"))return this.logout(),void this.$router.push({name:"LogIn"});this.list.oldPassword=this.list.password}})).catch((e=>{console.error("Error:",e),e.response&&400===e.response.status&&alert("Failed to change password: "+e.response.data),e.response&&401===e.response.status&&alert("Failed to change password. Please try again later.")}))},async updateMemberTier(e){const t=localStorage.getItem("token").replace(/"/g,"");try{const o={tier:this.list.tier},s=await v.Z.put(`http://4.156.87.88:8080/memberships/${e}`,o,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(200===s.status){const e=s.data;this.list.tier=s.data.tier,console.log("Member tier updated successfully:",e.tier)}else console.error("Error updating member tier:",s.data)}catch(o){console.error("Error updating member tier:",o)}},async getUserData(){const e=localStorage.getItem("user"),t=e.replace(/"/g,""),o=localStorage.getItem("token").replace(/"/g,"");if(e&&o)try{const e=await v.Z.get(`http://4.156.87.88:8080/users/email/${t}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});console.log(e.data);const s=e.data;this.list.name=s.name,this.list.email=s.email,this.list.number=s.number,this.list.membershipId=s.membershipId,this.list.tier=s.tier,this.updateMemberTier(this.list.membershipId)}catch(s){s.response&&404===s.response.status?alert("User not found"):console.error("An error occurred:",s)}else console.error("userEmail or token is missing.")},updateUser(){const e=localStorage.getItem("user"),t=localStorage.getItem("token").replace(/"/g,"");if(!e||!t)return void console.error("userEmail or token is missing.");const o=e.replace(/"/g,""),s=JSON.stringify({name:this.list.name,email:this.list.email,number:this.list.number}),a={Authorization:`Bearer ${t}`,"Content-Type":"application/json"},r=`http://4.156.87.88:8080/users/update/${o}`;v.Z.put(r,s,{headers:a}).then((e=>{if(console.log("JSON Data:",s),console.log(e.data),alert("Profile updated successfully!"),this.list.email!==o){if(confirm("You are changing your email. To continue, you will need to re-login. Do you want to proceed?"))return this.logout(),void console.log("otw to login page");this.list.email=o}this.$router.push("/")})).catch((e=>{console.error("Error: ",e),404===e.response.status?(console.error("Error 404!: ",e.response.data),alert("Error 404!!!!.")):400===e.response.status?(console.error("error 400 ",e.data),alert("Failed to update profile. "+e.response.data)):e.response&&(console.error("JSON Data: ",s),console.error("Response error: ",e.response),alert("Failed to update profile. Error response.\n"+e))}))},async updateAndGoToAccount(){this.updateUser(),this.goToAccountPage()}},mounted(){this.getUserData()}};const za=(0,_.Z)(Na,[["render",ja]]);var La=za;const Za={style:{"background-color":"#FFFFFF"}},Va={class:"container p-4"},Ja={class:"row"},qa={class:"col-lg-3"},Ya={class:"card mb-2"},Ha={class:"card-body text-center",style:{"background-color":"#FEFBF7"}},Ga=(0,r._)("img",{src:ee,class:"rounded-circle",style:{width:"150px"},alt:"Avatar"},null,-1),Ra={class:"my-3 fw-semibold text-uppercase"},Ka={class:"container d-flex justify-content-center mt-9"},Qa={class:"card",style:{"background-color":"#FFFFFF"}},Wa={class:"p-3 px-4"},Xa=(0,r._)("div",{class:"d-flex flex-row justify-content-between mt-1"},null,-1),er={class:"d-flex flex-row justify-content-center mt-2"},tr={class:"star"},or=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"LV Member? "),(0,r._)("p",{class:"mb-2"},"Enter Member ID: ")],-1),sr={class:"input-group mb-3"},ar={class:"col d-flex justify-content-center my-auto mx-auto pt-0 pb-2"},rr={class:"col-lg-8"},nr={class:"card mb-4"},lr={class:"card-body",style:{"background-color":"#FEFBF7"}},ir={class:"row"},cr=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Name")],-1),dr={class:"text-muted mb-0"},ur=(0,r._)("hr",null,null,-1),mr={class:"row"},gr=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Email")],-1),pr={class:"text-muted mb-0"},hr=(0,r._)("hr",null,null,-1),br={class:"row"},fr=(0,r._)("div",{class:"col-sm-3"},[(0,r._)("p",{class:"mb-0 fw-semibold"},"Mobile")],-1),vr={class:"text-muted mb-0"},wr=(0,r._)("hr",null,null,-1),_r={class:"col d-flex justify-content-center my-auto mx-auto pt-3 pb-2"},kr={class:"col d-flex justify-content-center my-auto mx-auto pt-0 pb-3"};function yr(e,t,o,a,n,l){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("section",Za,[(0,r._)("div",Va,[(0,r._)("div",Ja,[(0,r._)("div",qa,[(0,r._)("div",Ya,[(0,r._)("div",Ha,[Ga,(0,r._)("h4",Ra,(0,X.zw)(n.list.name),1),(0,r._)("div",Ka,[(0,r._)("div",Qa,[(0,r._)("div",Wa,[Xa,(0,r._)("div",er,[(0,r._)("div",tr,[or,(0,r._)("div",sr,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control rounded-3",style:{"background-colour":"#FEFBF7"},id:"memberID","onUpdate:modelValue":t[0]||(t[0]=t=>e.memberID=t)},null,512),[[s.nr,e.memberID]])])])]),(0,r._)("div",ar,[(0,r._)("button",{type:"button",class:"form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"},onClick:t[1]||(t[1]=(...e)=>l.updateMemberIdinUser&&l.updateMemberIdinUser(...e))}," Enter ")])])])])])])]),(0,r._)("div",rr,[(0,r._)("div",nr,[(0,r._)("div",lr,[(0,r._)("div",ir,[cr,(0,r._)("div",dr,(0,X.zw)(n.list.name),1)]),ur,(0,r._)("div",mr,[gr,(0,r._)("div",pr,(0,X.zw)(n.list.email),1)]),hr,(0,r._)("div",br,[fr,(0,r._)("div",vr,(0,X.zw)(n.list.number),1)]),wr,(0,r._)("div",_r,[(0,r._)("button",{type:"button",class:"form-control text-centerbtn btn btn-outline-light btn-rounded btn-block mx-auto",style:{"background-color":"#5F4D30"},onClick:t[2]||(t[2]=(...e)=>l.goToEditProfile&&l.goToEditProfile(...e))}," Edit Profile ")]),(0,r._)("div",kr,[(0,r._)("button",{type:"button",class:"btn btn-outline-danger form-control text-centerbtn btn-rounded mx-auto",onClick:t[3]||(t[3]=(...e)=>l.logout&&l.logout(...e))}," Log Out ")])])])])])])])])}var Dr={name:"MemberID",components:{},methods:{logout(){const e=Me();e.logout()},goToAccountPage(){console.log("otw to Account Page"),this.$router.push("/AccountPage")},goToEditProfile(){console.log("otw to Edit profile Page"),this.$router.push("/EditProfilePage")},async updateMemberIdinUser(){const e=localStorage.getItem("token");let t=e.replace(/"/g,"");const o=localStorage.getItem("user"),s=o.replace(/"/g,"");console.log("updating memberid :"),console.log(this.memberID),await(0,v.Z)({method:"put",url:`http://4.156.87.88:8080/users/update-membership/${s}/${this.memberID}`,headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},data:{memberId:""}}).then((e=>{200===e.status&&this.$router.push("/AccountPage")})).catch((e=>{e.response?404===e.response.status?(alert(e.response.data),console.error("Error: "+e.response.data)):console.error("HTTP error: "+e.response.status):e.request?console.error("Network error: "+e.message):console.error("Unexpected error")}))}},computed:{user(){return this.$store.state.user},updatedUser(){return this.$store.state.updatedUser}},data(){return{list:{name:"",number:"",email:localStorage.getItem("user").replace(/["']/g,""),memberID:""}}},mounted(){const e=localStorage.getItem("user"),t=localStorage.getItem("token");let o=e.replace(/"/g,""),s=t.replace(/"/g,"");console.log(`/users/email/${o}`),console.log(`Bearer ${s}`),e&&t&&v.Z.get(`http://4.156.87.88:8080/users/email/${o}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}).then((e=>{console.log("Fetched data:",e.data);const t=e.data,o=t.name,s=t.number,a=t.email;console.log(o),console.log(s),this.list.name=o,this.list.number=s,this.list.userEmail=a})).catch((e=>{console.error("Error fetching user data:",e)}))}};const Ir=(0,_.Z)(Dr,[["render",yr]]);var xr=Ir;const Sr=[{path:"/",name:"Home",component:W},{path:"/AccountPage",name:"AccountPage",component:je},{path:"/LogIn",name:"Log-InPage",component:ot},{path:"/ConfirmedBookingPage",name:"ConfirmedBookingPage",component:Tt},{path:"/SignUpPage",name:"SignUpPage",component:Gt},{path:"/BookingDetailsPage",name:"BookingDetailsPage",component:$o},{path:"/ChangeAppointmentPage",name:"ChangeAppointmentPage",component:Ps},{path:"/EditProfilePage",name:"EditProfilePage",component:sa},{path:"/EditProfileMemberPage",name:"EditProfileMemberPage",component:La},{path:"/MemberIdPage",name:"MemberIdPage",component:xr}],Pr=(0,S.p7)({history:(0,S.PO)("/"),routes:Sr});Pr.beforeEach((async e=>{const t=["/LogIn","/SignUpPage"],o=!t.includes(e.path),s=Me();if(o&&!s.user)return s.returnUrl=e.fullPath,"/LogIn"}));var Tr=Pr;v.Z.defaults.baseURL="http://4.156.87.88:8080",v.Z.defaults.headers.common["Authorization"]="Bearer"+localStorage.getItem("token");o(8702);const Er=(0,s.ri)(x);Er.use(Tr),Er.use((0,a.WB)()),Er.mount("#app")}},t={};function o(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,s,a,r){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],r=e[d][2];for(var l=!0,i=0;i<s.length;i++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(l=!1,r<n&&(n=r));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,a,r]}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,r,n=s[0],l=s[1],i=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var d=i(o)}for(t&&t(s);c<n.length;c++)r=n[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},s=self["webpackChunkcs203_project"]=self["webpackChunkcs203_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(8118)}));s=o.O(s)})();
//# sourceMappingURL=app.14ea531a.js.map